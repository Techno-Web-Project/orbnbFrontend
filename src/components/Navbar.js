import React, { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { Button } from './Button';
import './Navbar.css';

function Navbar(props) {
  const [click, setClick] = useState(false);
  const [button, setButton] = useState(true);

  const handleclick = () => setClick(!click);
  const closeMobileMenu = () => setClick(false);

  const showButton = () => {
    if (window.innerWidth <= 960) {
      setButton(false);
    } else {
      setButton(true);
    }
  };

  useEffect(() => {
    showButton();
  }, []); //pour ne pas afficher le bouton connexion en mode mobile quand on réduit puis rafraichit la page

  window.addEventListener('resize', showButton);

  let connected = false;

  if (props.connectedUser != null) {
    connected = true;
  }

  return (
    <>
      <nav className="navbar">
        <div className="navbar-container">
          <Link to="/" className="navbar-logo" onClick={closeMobileMenu}>
            <svg
              width="165"
              height="34"
              viewBox="0 0 165 34"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M28.4892 8.84723L19.7403 1.55883C17.2486 -0.51961 13.6494 -0.51961 11.1853 1.55883L2.40871 8.84723C0.885962 10.122 0 12.0065 0 14.0018V26.3061C0 28.1074 0.692158 29.7702 1.96573 31.045C3.2393 32.3198 4.90048 33.0126 6.70009 33.0126H24.1978C25.9975 33.0126 27.6586 32.3198 28.9322 31.045C30.2058 29.7702 30.8979 28.1074 30.8979 26.3061V14.0018C30.8979 12.0065 30.012 10.122 28.4892 8.84723ZM29.0706 26.3061C29.0706 28.9942 26.8834 31.1835 24.1978 31.1835H6.70009C4.01452 31.1835 1.8273 28.9942 1.8273 26.3061V14.0018C1.8273 12.5607 2.46408 11.1751 3.57154 10.2606L12.3204 2.94446C13.2341 2.19622 14.3415 1.80824 15.449 1.80824C16.5564 1.80824 17.6639 2.19622 18.5775 2.94446L27.3264 10.2329C28.4338 11.1751 29.0706 12.533 29.0706 13.9741V26.3061Z"
                fill="#FD5454"
              />
              <path
                d="M21.2631 15.9139H11.8498L12.9018 14.8609C13.2618 14.5006 13.2618 13.9186 12.9018 13.5861C12.5419 13.2258 11.9605 13.2258 11.6283 13.5861L9.02575 16.1911L8.99807 16.2188L8.97038 16.2465C8.61046 16.6067 8.61046 17.1887 8.97038 17.5213L11.5729 20.1262C11.739 20.2925 11.9882 20.4034 12.2097 20.4034C12.4312 20.4034 12.6803 20.3202 12.8465 20.1262C13.2064 19.766 13.2064 19.184 12.8465 18.8515L11.7944 17.7984H21.2631C21.7615 17.7984 22.1768 17.3827 22.1768 16.8839C22.1768 16.385 21.7615 15.9139 21.2631 15.9139Z"
                fill="#FD5454"
              />
              <path
                d="M19.3251 19.4611C18.9651 19.1009 18.3837 19.1009 18.0515 19.4611C17.6916 19.8214 17.6916 20.4034 18.0515 20.7359L19.1036 21.789H9.63484C9.13649 21.789 8.72119 22.2047 8.72119 22.7035C8.72119 23.2023 9.13649 23.618 9.63484 23.618H19.0759L18.0238 24.6711C17.6639 25.0314 17.6639 25.6133 18.0238 25.9459C18.1899 26.1121 18.4391 26.223 18.6606 26.223C18.8821 26.223 19.1312 26.1399 19.2974 25.9459L21.8999 23.3409L21.9276 23.3132L21.9553 23.2855C22.3152 22.9252 22.3152 22.3432 21.9553 22.0107L19.3251 19.4611Z"
                fill="#FD5454"
              />
              <path
                d="M56.6186 3.88668C47.7866 3.88668 41.6403 9.87259 41.6403 18.1032C41.6403 26.6664 47.7866 32.8186 56.6186 32.8186C65.4228 32.8186 71.5692 26.6664 71.5692 18.1032C71.5692 9.87259 65.4228 3.88668 56.6186 3.88668ZM56.6186 27.8303C51.1367 27.8303 47.3436 23.7012 47.3436 18.1586C47.3436 12.8933 51.1367 8.90265 56.6186 8.90265C62.1281 8.90265 65.8935 12.8933 65.8935 18.1586C65.9212 23.7012 62.1558 27.8303 56.6186 27.8303Z"
                fill="#FD5454"
              />
              <path
                d="M81.1487 15.3597V12.7824H76.2482V32.3475H81.7024V22.6758C81.7024 18.5189 84.6371 17.0779 87.4611 17.0779C87.9595 17.0779 88.2364 17.1056 88.5686 17.2164V12.145C85.8276 12.145 82.9206 12.921 81.1487 15.3597Z"
                fill="#FD5454"
              />
              <path
                d="M103.796 12.2836C101.083 12.2836 98.951 13.309 97.5943 14.8331V3.6927H92.1401V32.3475H97.0406V29.4099C98.2865 31.433 100.695 32.8463 103.741 32.8463C109.14 32.8463 113.514 28.5508 113.514 22.4541C113.486 16.4128 109.306 12.2836 103.796 12.2836ZM103.104 28.3846C100.031 28.3846 97.4836 26.0567 97.4559 22.4541C97.4559 18.4635 100.557 16.7176 103.159 16.7176C106.232 16.7176 108.475 19.1009 108.475 22.4818C108.447 25.9182 106.094 28.3846 103.104 28.3846Z"
                fill="#FD5454"
              />
              <path
                d="M129.572 12.3113C126.609 12.3113 124.173 13.3644 122.623 15.3597V12.7824H117.888V32.3475H123.343V21.6781C123.343 18.3526 125.64 16.8562 128.16 16.8562C130.707 16.8562 132.7 18.4358 132.7 21.6504V32.3475H138.155V20.4034C138.155 14.9994 134.472 12.3113 129.572 12.3113Z"
                fill="#FD5454"
              />
              <path
                d="M155.071 12.2836C152.358 12.2836 150.226 13.309 148.869 14.8331V3.6927H143.415V32.3475H148.316V29.4099C149.562 31.433 151.97 32.8463 155.016 32.8463C160.415 32.8463 164.789 28.5508 164.789 22.4541C164.789 16.4128 160.608 12.2836 155.071 12.2836ZM154.379 28.3846C151.306 28.3846 148.759 26.0567 148.731 22.4541C148.731 18.4635 151.832 16.7176 154.434 16.7176C157.507 16.7176 159.75 19.1009 159.75 22.4818C159.722 25.9182 157.369 28.3846 154.379 28.3846Z"
                fill="#FD5454"
              />
            </svg>
          </Link>
          <div className="menu-icon" onClick={handleclick}>
            <i className={click ? 'fas fa-times' : 'fas fa-bars'} />
          </div>
          <ul className={click ? 'nav-menu active' : 'nav-menu'}>
            <li className="nav-item">
              <Link to="/" className="nav-links" onClick={closeMobileMenu}>
                Accueil
              </Link>
            </li>
            <li className="nav-item">
              {connected && (
                <Link
                  to="/reservations"
                  className="nav-links"
                  onClick={closeMobileMenu}
                >
                  Réservations
                </Link>
              )}
            </li>
            <li className="nav-item">
              {connected && (
                <Link
                  to="/messages"
                  className="nav-links"
                  onClick={closeMobileMenu}
                >
                  Messages
                </Link>
              )}
            </li>
            <li className="nav-item">
              <Link
                to="/recherche"
                className="nav-links"
                onClick={closeMobileMenu}
              >
                Recherche
              </Link>
            </li>
            <li className="nav-item">
              {connected && (
                <Link
                  to="/vosbiens"
                  className="nav-links"
                  onClick={closeMobileMenu}
                >
                  Vos biens
                </Link>
              )}
            </li>
            <li className="nav-item">
              {connected && (
                <Link
                  to="/account"
                  className="nav-links"
                  onClick={closeMobileMenu}
                >
                  {/* <img
                className="imgNavbar"
                src="images/profile-pic-test.png"
                alt="Profil"
              /> */}
                  <svg
                    className="svgAccount"
                    width="25"
                    height="25"
                    viewBox="0 0 42 49"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path d="M35.1326 24.7148C34.9586 24.5369 34.7509 24.3955 34.5217 24.2987C34.2924 24.2019 34.0462 24.1517 33.7974 24.151C33.5486 24.1503 33.3021 24.1992 33.0723 24.2947C32.8426 24.3903 32.6342 24.5306 32.4592 24.7075C32.2842 24.8844 32.1462 25.0944 32.0532 25.3252C31.9602 25.556 31.914 25.803 31.9175 26.0518C31.9209 26.3006 31.9738 26.5462 32.0731 26.7744C32.1724 27.0025 32.3162 27.2086 32.496 27.3807C34.0867 28.946 35.3488 30.8133 36.2081 32.873C37.0674 34.9327 37.5067 37.1433 37.5001 39.3751C37.5001 41.6684 30.9266 45.0001 20.6251 45.0001C10.3237 45.0001 3.75009 41.6667 3.75009 39.3713C3.74378 37.1549 4.17717 34.9592 5.02517 32.9114C5.87317 30.8636 7.11893 29.0043 8.69035 27.4412C8.86809 27.2679 9.00964 27.0611 9.10681 26.8327C9.20398 26.6043 9.25483 26.3588 9.2564 26.1106C9.25797 25.8624 9.21024 25.6163 9.11597 25.3867C9.02171 25.157 8.88278 24.9484 8.70726 24.7729C8.53174 24.5974 8.32311 24.4584 8.09347 24.3642C7.86384 24.2699 7.61777 24.2222 7.36955 24.2237C7.12133 24.2253 6.87589 24.2762 6.64747 24.3733C6.41905 24.4705 6.2122 24.6121 6.03891 24.7898C4.11783 26.7008 2.59491 28.9739 1.55833 31.4775C0.521761 33.981 -0.00787664 36.6654 8.85219e-05 39.3751C8.85219e-05 45.4643 10.6257 48.7501 20.6251 48.7501C30.6245 48.7501 41.2502 45.4643 41.2502 39.3751C41.2585 36.6471 40.7216 33.945 39.6711 31.4275C38.6205 28.9099 37.0775 26.6277 35.1326 24.7148V24.7148Z" />
                    <path d="M20.6253 26.25C23.2211 26.25 25.7587 25.4803 27.9171 24.0381C30.0755 22.5959 31.7578 20.546 32.7512 18.1478C33.7446 15.7495 34.0045 13.1105 33.4981 10.5645C32.9917 8.01846 31.7416 5.6798 29.9061 3.84423C28.0705 2.00867 25.7318 0.758631 23.1858 0.252199C20.6398 -0.254232 18.0008 0.00568685 15.6025 0.999088C13.2043 1.99249 11.1544 3.67476 9.71221 5.83315C8.27001 7.99155 7.50024 10.5291 7.50024 13.125C7.50426 16.6048 8.88836 19.9408 11.3489 22.4014C13.8095 24.8619 17.1455 26.246 20.6253 26.25ZM20.6253 3.75001C22.4795 3.75001 24.292 4.29985 25.8337 5.32999C27.3755 6.36013 28.5771 7.8243 29.2866 9.53736C29.9962 11.2504 30.1819 13.1354 29.8201 14.954C29.4584 16.7726 28.5655 18.443 27.2544 19.7542C25.9433 21.0653 24.2728 21.9582 22.4542 22.3199C20.6357 22.6816 18.7507 22.496 17.0376 21.7864C15.3245 21.0768 13.8604 19.8752 12.8302 18.3335C11.8001 16.7918 11.2502 14.9792 11.2502 13.125C11.2532 10.6395 12.2418 8.25664 13.9994 6.49912C15.7569 4.7416 18.1398 3.75294 20.6253 3.75001V3.75001Z" />
                  </svg>
                  {props.connectedUser}
                </Link>
              )}
            </li>
            <li className="nav-item">
              <Link
                to="/connexion"
                className="nav-links-mobile"
                onClick={closeMobileMenu}
              >
                Connexion
              </Link>
            </li>
          </ul>
          {button && !connected && (
            <Button buttonStyle="btn--outline">Connexion</Button>
          )}
        </div>
      </nav>
    </>
  );
}

export default Navbar;
